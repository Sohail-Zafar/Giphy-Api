<!-- Assignment: Giphy API -->
<!-- File: index.html -->
<!-- Programmer: Sohail Zafar -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Sports Cars</title>
    
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
   
    <!-- Form input  -->
    <div id = "form1">
      <h1>Cars</h1>
      <form id="Car-form">
      <label for="car-input">Search for a sports car</label>
      <input type="text" id="car-input"><br/>

      <input id="find-car" type="submit" value="Search">
      </form>
      <div id="buttons"></div>
      <div id="images"></div>
      </div>
    <script type="text/javascript">
    // Array of car makers
        var arrayOfCarMakers = [ "Acura","Audi", "Bentley", "BMW", "Chevrolet", "Chrysler", "Corvette", "Dodge",
            "Ferrari", "Fiat", "Honda", "Isuzu", "Lamborghini", "Lotus", "Mazda", "Mercedes Benz", "Nissan", "Toyota", "Volkswagen"];
    
       // buttons of car makers
        for ( var i = 0; i < arrayOfCarMakers.length; i++) {
            var $buttons =  $("<button data-maker=" + arrayOfCarMakers[i] + ">"+ arrayOfCarMakers[i] +"</button>");
            $("#buttons").append($buttons);
            
            var carData = $buttons.attr("data-maker");
         }
        //  on click button function for array of car makers
        $("button").on("click", function(event) {
            var carData = $(this).attr("data-maker");
            console.log(carData);
            $("#images").empty();
            apiSearch(carData);
        });


    // Search for car makers that the user has entered
    $("#find-car").on("click", function(event) {
        event.preventDefault();
        $("#images").empty();
        var car = $("#car-input").val();
        apiSearch(car);
    });
    
    //  Function search the GIPHY API for car maker 
      function apiSearch(carSearch) {

        var queryURL = "http://api.giphy.com/v1/gifs/search?q=" + carSearch +"&api_key=3JIIu8SyI539zTyeyj8jyUEpI2XVBILl";
      
        $.ajax({
        url: queryURL,
        method: "GET"
        }).then(function(response) {
        console.log(response);
    
    //  Load images from data collected of the GIPHY API
        for (var i = 0; i< response.data.length; i++) {
            var carImage = response.data[i].images.fixed_height.url;
            var $carImage = $('<img width = 200px height = 100px>').attr('src', carImage);
            $("#images").append($carImage); }
    
        });
    }

   </script>
</body>
</html>